{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pedro\\\\Desktop\\\\Chat real time\\\\react-iniciante\\\\web\\\\src\\\\components\\\\Promotion\\\\Modal\\\\CommentsTree\\\\CommentsTree.js\";\nimport React, { useState, useMemo } from 'react';\nimport './CommentsTree.css';\n\nfunction getTree(list) {\n  if (!list) {\n    return [];\n  }\n\n  const roots = [];\n  const childrenByParentId = {};\n  list.forEach(item => {\n    if (!item.parentId) {\n      roots.push(item);\n      return;\n    }\n\n    if (!childrenByParentId[item.parentId]) {\n      childrenByParentId[item.parentId] = [];\n    }\n\n    childrenByParentId[item.parentId].push(item);\n  });\n\n  function buildNodes(nodes) {\n    if (!nodes) {\n      return null;\n    }\n\n    return nodes.map(node => ({ ...node,\n      children: buildNodes(childrenByParentId[node.id])\n    }));\n  }\n\n  return buildNodes(roots);\n}\n\nconst PromotionModalCommentsTree = ({\n  comments,\n  sendComment\n}) => {\n  const tree = useMemo(() => getTree(comments), [comments]);\n  const [comment, setComment] = useState('');\n  const [activeCommentBox, setActiveCommentBox] = useState(null);\n\n  if (!comments) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 12\n      }\n    }, \"Carregando...\");\n  }\n\n  function renderItem(item) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"promotion-modal-comments-tree__item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.user.avatarUrl,\n      alt: `foto de ${item.user.name}`,\n      className: \"promotion-modal-comments-tree__item__avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"promotion-modal-comments-tree__item__info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"promotion-modal-comments-tree__item__name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }, item.user.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, item.comment), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"promotion-modal-comments-tree__answer-button\",\n      onClick: () => {\n        setComment('');\n        setActiveCommentBox(activeCommentBox === item.id ? null : item.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, \"Responder\"), activeCommentBox === item.id && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"promotion-modal-comments-tree__comment-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      value: comment,\n      onChange: ev => setComment(ev.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"promotion-modal-comments-tree__send-button\",\n      onClick: () => {\n        sendComment(comment, item.id);\n        setComment('');\n        setActiveCommentBox(null);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"Enviar\")), item.children && renderList(item.children)));\n  }\n\n  function renderList(list) {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"promotion-modal-comments-tree\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, list.map(renderItem));\n  }\n\n  return renderList(tree);\n};\n\nPromotionModalCommentsTree.defaultProps = {\n  sendComment: () => {}\n};\nexport default PromotionModalCommentsTree;","map":{"version":3,"sources":["C:/Users/pedro/Desktop/Chat real time/react-iniciante/web/src/components/Promotion/Modal/CommentsTree/CommentsTree.js"],"names":["React","useState","useMemo","getTree","list","roots","childrenByParentId","forEach","item","parentId","push","buildNodes","nodes","map","node","children","id","PromotionModalCommentsTree","comments","sendComment","tree","comment","setComment","activeCommentBox","setActiveCommentBox","renderItem","user","avatarUrl","name","ev","target","value","renderList","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport './CommentsTree.css';\r\n\r\nfunction getTree(list) {\r\n  if (!list) {\r\n    return [];\r\n  }\r\n  const roots = [];\r\n  const childrenByParentId = {};\r\n\r\n  list.forEach((item) => {\r\n    if (!item.parentId) {\r\n      roots.push(item);\r\n      return;\r\n    }\r\n    if (!childrenByParentId[item.parentId]) {\r\n      childrenByParentId[item.parentId] = [];\r\n    }\r\n    childrenByParentId[item.parentId].push(item);\r\n  });\r\n\r\n  function buildNodes(nodes) {\r\n    if (!nodes) {\r\n      return null;\r\n    }\r\n    return nodes.map((node) => ({\r\n      ...node,\r\n      children: buildNodes(childrenByParentId[node.id]),\r\n    }));\r\n  }\r\n\r\n  return buildNodes(roots);\r\n}\r\n\r\nconst PromotionModalCommentsTree = ({ comments, sendComment }) => {\r\n  const tree = useMemo(() => getTree(comments), [comments]);\r\n  const [comment, setComment] = useState('');\r\n  const [activeCommentBox, setActiveCommentBox] = useState(null);\r\n  if (!comments) {\r\n    return <div>Carregando...</div>;\r\n  }\r\n\r\n  function renderItem(item) {\r\n    return (\r\n      <li className=\"promotion-modal-comments-tree__item\">\r\n        <img\r\n          src={item.user.avatarUrl}\r\n          alt={`foto de ${item.user.name}`}\r\n          className=\"promotion-modal-comments-tree__item__avatar\"\r\n        />\r\n        <div className=\"promotion-modal-comments-tree__item__info\">\r\n          <span className=\"promotion-modal-comments-tree__item__name\">\r\n            {item.user.name}\r\n          </span>\r\n          <p>{item.comment}</p>\r\n          <button\r\n            type=\"button\"\r\n            className=\"promotion-modal-comments-tree__answer-button\"\r\n            onClick={() => {\r\n              setComment('');\r\n              setActiveCommentBox(\r\n                activeCommentBox === item.id ? null : item.id\r\n              );\r\n            }}\r\n          >\r\n            Responder\r\n          </button>\r\n          {activeCommentBox === item.id && (\r\n            <div className=\"promotion-modal-comments-tree__comment-box\">\r\n              <textarea\r\n                value={comment}\r\n                onChange={(ev) => setComment(ev.target.value)}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                className=\"promotion-modal-comments-tree__send-button\"\r\n                onClick={() => {\r\n                  sendComment(comment, item.id);\r\n                  setComment('');\r\n                  setActiveCommentBox(null);\r\n                }}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </div>\r\n          )}\r\n          {item.children && renderList(item.children)}\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  function renderList(list) {\r\n    return (\r\n      <ul className=\"promotion-modal-comments-tree\">{list.map(renderItem)}</ul>\r\n    );\r\n  }\r\n\r\n  return renderList(tree);\r\n};\r\n\r\nPromotionModalCommentsTree.defaultProps = {\r\n  sendComment: () => {},\r\n};\r\n\r\nexport default PromotionModalCommentsTree;\r\n"]},"metadata":{},"sourceType":"module"}